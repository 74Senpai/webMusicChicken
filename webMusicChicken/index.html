<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./resources/styles/keyframe.css">
    <link rel="stylesheet" href="./resources/styles/style.css">
    <title>Music Play</title>
</head>

<body>
    <header>
    </header>
    <div id="container-song">

    </div>
    <script src="https://kit.fontawesome.com/dae763dd72.js" crossorigin="anonymous"></script>
    <script type="module">
        import App from './resources/js/mucsicAppRender.js';
        console.log("hihi",App);
        document.addEventListener("DOMContentLoaded", async function () {
        const app = App.app();
        const data = await app.getData('fakeAPI.json');
        let tmp = await Object.keys(data.play_list).length;
        app.setLengthList(tmp);
        const HTML = (() => {
                let HTMLs = "";
                let songList = data.play_list;
                for (let i = 0; i < tmp; i++) {
                    HTMLs += `
                    <div class="@{class_song_tag}">
                                <div class="@{class_song}" data-index="${i}">
                                    <audio preload="none">
                                        <source src="${songList[i].audio_src}" type="audio/ogg">
                                    </audio>
                                    <div class="@{class_song_img_mini}">
                                        <img src="${songList[i].img}" alt="@{alt}">    
                                    </div>
                                    <div class="@{class_song_infor}">
                                        <div class="@{class_name_song}">
                                            ${songList[i].name_song}<img width="12px" height="12px" style="display: none; background-color: rgba: (0,0,0,0); margin-left:10px;"src="">    
                                        </div>
                                        <div class="@{class_author}">
                                            ${songList[i].author}
                                        </div>
                                    </div>
                                    <div class="@{class_more_infor}">
                                        <button id="@{id_more}">...</button>
                                    </div>
                                </div>
                            </div>
                         `
                }
                return HTMLs;
            })();
        app.createHTMLForList(HTML);
        app.renderStruct('#container-song');
        app.appStart();
    });
    </script>
</body>

</html>